<div class="container preorders-container">
  <!-- Logo with Navigation to Home -->
  <a [routerLink]="['/home']">
    <img src="assets/logo.png" alt="PFF Logo" class="logo">
  </a>

  <h2 class="page-title">PreOrders</h2>

  <!-- Vendor Name Selector/Filter -->
  <div class="filters">
    <div class="filter-group">
      <label for="vendorFilter" class="filter-label">Vendor Name:</label>
      <select id="vendorFilter" [(ngModel)]="selectedVendor" (change)="filterByVendor()">
        <option value="">All Vendors</option>
        <option *ngFor="let vendor of uniqueVendors" [value]="vendor">{{ vendor }}</option>
      </select>
    </div>
  </div>

  <!-- PreOrders Table -->
  <table class="table preorders-table order-grid">
    <thead>
      <tr>
        <th>Dispatch Date</th>
        <th class="wide-column">Customer Name</th>
        <th>SOD ID</th>
        <th class="wide-column">Description</th>
        <th>Entry Time</th>
        <th>Units</th>
        <th>Unit Type</th>
        <th>Unit Size</th>
        <th>Weight</th>
        <th>Price</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let order of filteredPreOrders; let i = index">
        <td>{{ order.dispatchDate }}</td>
        <td>{{ order.customerName }}</td>
        <td>{{ order.sodId }}</td>
        <td>{{ order.descriptionMemo }}</td>
        <td>{{ order.entryTime }}</td>
        <td>{{ order.orderedUnits }}</td>
        <td>{{ getUnitTypeLabel(order.unitType) }}</td>
        <td>{{ order.unitSize }}</td>

        <!-- Editable Weight column with validation -->
        <td>
          <input
            class="input-number"
            type="number"
            [(ngModel)]="weights[i]"
            placeholder="Enter weight"
            required
            (blur)="validateWeight(i)"
          />
          <div *ngIf="weightErrors[i]" class="error">
            {{ weightErrors[i] }}
          </div>
        </td>

        <!-- Editable Price column with validation -->
        <td>
          <input
            class="input-number"
            type="number"
            [(ngModel)]="order.price"
            placeholder="Enter price"
            required
            (blur)="validatePrice(i)"
          />
          <div *ngIf="priceErrors[i]" class="error">
            {{ priceErrors[i] }}
          </div>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Submit Button -->
  <button class="submit-btn" (click)="submitWeights()">Submit</button>
</div>
